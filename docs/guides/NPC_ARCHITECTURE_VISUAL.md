# ğŸŒ NPC Architecture - Visual Guide

## Database Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FIRESTORE DATABASE                            â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     players/                               â”‚  â”‚
â”‚  â”‚                (Individual Player Data)                    â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚  â”‚
â”‚  â”‚  â”‚  player_abc123  â”‚  â”‚  player_def456  â”‚  â† Per User    â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚                 â”‚  â”‚
â”‚  â”‚  â”‚  name: "Alice"  â”‚  â”‚  name: "Bob"    â”‚                â”‚  â”‚
â”‚  â”‚  â”‚  fame: 35       â”‚  â”‚  fame: 52       â”‚                â”‚  â”‚
â”‚  â”‚  â”‚  streams: 5k    â”‚  â”‚  streams: 12k   â”‚                â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   npc_artists/                             â”‚  â”‚
â”‚  â”‚               ğŸŒ GLOBAL (SHARED BY ALL)                    â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚  â”‚
â”‚  â”‚  â”‚ npc_jaylen_sky  â”‚  â”‚  npc_luna_grey  â”‚  â† Shared!    â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚                 â”‚  â”‚
â”‚  â”‚  â”‚  name: "Jaylen" â”‚  â”‚  name: "Luna"   â”‚                â”‚  â”‚
â”‚  â”‚  â”‚  fame: 45       â”‚  â”‚  fame: 68       â”‚                â”‚  â”‚
â”‚  â”‚  â”‚  streams: 150k  â”‚  â”‚  streams: 300k  â”‚                â”‚  â”‚
â”‚  â”‚  â”‚  isNPC: true    â”‚  â”‚  isNPC: true    â”‚                â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚  â”‚
â”‚  â”‚  â”‚      _initialized                    â”‚  â† Guard       â”‚  â”‚
â”‚  â”‚  â”‚                                      â”‚                 â”‚  â”‚
â”‚  â”‚  â”‚  initialized: true                   â”‚                 â”‚  â”‚
â”‚  â”‚  â”‚  count: 10                           â”‚                 â”‚  â”‚
â”‚  â”‚  â”‚  initializedAt: timestamp            â”‚                 â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Initialization Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Player A   â”‚
â”‚   (Alice)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Clicks "Initialize NPCs"
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Firebase Cloud Function           â”‚
â”‚   "initializeNPCArtists"            â”‚
â”‚                                     â”‚
â”‚  1. Check if already initialized    â”‚
â”‚  2. Create 10 NPCs globally         â”‚
â”‚  3. Set _initialized flag           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ 2. NPCs Created in Global Collection
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Firestore: npc_artists/        â”‚
â”‚                                     â”‚
â”‚   â€¢ npc_jaylen_sky                  â”‚
â”‚   â€¢ npc_luna_grey                   â”‚
â”‚   â€¢ npc_elodie_rain                 â”‚
â”‚   â€¢ npc_santiago_vega               â”‚
â”‚   â€¢ npc_zyrah                       â”‚
â”‚   â€¢ npc_kazuya_rin                  â”‚
â”‚   â€¢ npc_nova_reign                  â”‚
â”‚   â€¢ npc_jax_carter                  â”‚
â”‚   â€¢ npc_kofi_dray                   â”‚
â”‚   â€¢ npc_hana_seo                    â”‚
â”‚   â€¢ _initialized âœ…                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ 3. ALL Players Can Now See NPCs
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                   â”‚             â”‚
    â–¼                   â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Alice   â”‚      â”‚   Bob    â”‚   â”‚ Charlie â”‚
â”‚ Charts: â”‚      â”‚ Charts:  â”‚   â”‚ Charts: â”‚
â”‚         â”‚      â”‚          â”‚   â”‚         â”‚
â”‚ â€¢ Hana  â”‚      â”‚ â€¢ Hana   â”‚   â”‚ â€¢ Hana  â”‚
â”‚ â€¢ Luna  â”‚      â”‚ â€¢ Luna   â”‚   â”‚ â€¢ Luna  â”‚
â”‚ â€¢ Jaylenâ”‚      â”‚ â€¢ Jaylen â”‚   â”‚ â€¢ Jaylenâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†‘                 â†‘               â†‘
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          Same NPCs for Everyone!
```

---

## What Happens When Player B Tries to Initialize Again?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Player B   â”‚
â”‚    (Bob)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Clicks "Initialize NPCs"
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Firebase Cloud Function           â”‚
â”‚   "initializeNPCArtists"            â”‚
â”‚                                     â”‚
â”‚  1. Check _initialized flag         â”‚
â”‚  2. Already TRUE âœ…                 â”‚
â”‚  3. Return error message            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ 2. "Already initialized" message
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Player B's Screen                  â”‚
â”‚                                      â”‚
â”‚   âš ï¸ Already Initialized             â”‚
â”‚   NPC artists already initialized    â”‚
â”‚   Count: 10                          â”‚
â”‚                                      â”‚
â”‚   [OK]                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Result: No duplicates created! âœ…
```

---

## Hourly NPC Updates (Global)

```
Every Hour:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Firebase Scheduled Function          â”‚
â”‚   "simulateNPCActivity"                â”‚
â”‚   Runs: 0 * * * * (every hour)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ 1. Fetch all NPCs
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      npc_artists/ (Global)             â”‚
â”‚                                        â”‚
â”‚  For each NPC:                         â”‚
â”‚   â€¢ Update stream counts               â”‚
â”‚   â€¢ Check if time to release song      â”‚
â”‚   â€¢ Check if time to post on EchoX     â”‚
â”‚   â€¢ Save updates                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ 2. Updates Saved
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ALL Players See Updated NPCs         â”‚
â”‚                                        â”‚
â”‚   Alice's App â†’ Refresh â†’ New data âœ…   â”‚
â”‚   Bob's App â†’ Refresh â†’ New data âœ…     â”‚
â”‚   Charlie's App â†’ Refresh â†’ New data âœ… â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Player Chart Query (How Charts See NPCs)

```
When a player opens charts:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Player's Device   â”‚
â”‚   (Any Player)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1. Query for chart data
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â”‚             â”‚
    â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ players/â”‚  â”‚ npc_artists/ â”‚
â”‚         â”‚  â”‚  (Global)    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚              â”‚
     â”‚              â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ 2. Merge results
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Combined Chart Data      â”‚
â”‚                            â”‚
â”‚   #1 Hana Seo (NPC)        â”‚
â”‚   #2 Luna Grey (NPC)       â”‚
â”‚   #3 Jaylen Sky (NPC)      â”‚
â”‚   #4 Bob (Player)          â”‚
â”‚   #5 Alice (Player)        â”‚
â”‚   #6 Charlie (Player)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Multi-Player View (Same NPCs, Different Rankings)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      GLOBAL NPC DATA                             â”‚
â”‚                                                                  â”‚
â”‚   npc_hana_seo:    streams: 600,000  (Star Tier)               â”‚
â”‚   npc_luna_grey:   streams: 300,000  (Established Tier)        â”‚
â”‚   npc_jaylen_sky:  streams: 150,000  (Rising Tier)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚             â”‚             â”‚
              â–¼             â–¼             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   Alice     â”‚ â”‚     Bob     â”‚ â”‚   Charlie   â”‚
      â”‚  5k streams â”‚ â”‚ 12k streams â”‚ â”‚  3.5k streamsâ”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚             â”‚             â”‚
              â–¼             â–¼             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Alice's     â”‚ â”‚  Bob's      â”‚ â”‚ Charlie's   â”‚
      â”‚ Chart:      â”‚ â”‚  Chart:     â”‚ â”‚ Chart:      â”‚
      â”‚             â”‚ â”‚             â”‚ â”‚             â”‚
      â”‚ #1 Hana â­  â”‚ â”‚ #1 Hana â­  â”‚ â”‚ #1 Hana â­  â”‚
      â”‚ #2 Luna ğŸ‘¤  â”‚ â”‚ #2 Luna ğŸ‘¤  â”‚ â”‚ #2 Luna ğŸ‘¤  â”‚
      â”‚ #3 JaylenğŸ¤– â”‚ â”‚ #3 JaylenğŸ¤– â”‚ â”‚ #3 JaylenğŸ¤– â”‚
      â”‚ #4 Bob ğŸµ   â”‚ â”‚ #4 Bob ğŸµ   â”‚ â”‚ #4 Bob ğŸµ   â”‚
      â”‚    (12k)    â”‚ â”‚    (YOU!)   â”‚ â”‚    (12k)    â”‚
      â”‚ #5 Alice ğŸµ â”‚ â”‚ #5 Alice ğŸµ â”‚ â”‚ #5 Alice ğŸµ â”‚
      â”‚    (YOU!)   â”‚ â”‚    (5k)     â”‚ â”‚    (5k)     â”‚
      â”‚ #6 CharlieğŸµâ”‚ â”‚ #6 CharlieğŸµâ”‚ â”‚ #6 CharlieğŸµâ”‚
      â”‚    (3.5k)   â”‚ â”‚    (3.5k)   â”‚ â”‚    (YOU!)   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Same NPCs, Different "YOU" Position âœ…
```

---

## Cost Breakdown (Why Global Is Efficient)

### **If NPCs Were Per-Player:**
```
1,000 players Ã— 10 NPCs each = 10,000 NPC documents
Hourly updates: 10,000 writes Ã— 720 hours/month = 7.2M writes
Cost: ~$140/month ğŸ’¸
```

### **With Global NPCs (Current):**
```
1 global collection Ã— 10 NPCs = 10 NPC documents
Hourly updates: 10 writes Ã— 720 hours/month = 7,200 writes
Cost: ~$0.02/month ğŸ’°
```

### **Savings: 99.99% less cost!** ğŸ‰

---

## Key Takeaways

```
âœ… ONE collection for all players
âœ… Initialize ONCE, benefits ALL
âœ… Same NPCs, same competition
âœ… Cost scales with NPCs, not players
âœ… Foundation for multiplayer features
âœ… Living, breathing music industry

âŒ NOT per-player (by design)
âŒ Can't customize NPCs per player
âŒ All players see same NPC stats
```

---

## Summary Diagram

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Initialize NPCs â”‚
                    â”‚   (One Time)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Global NPCs     â”‚
                    â”‚  in Firestore    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                  â”‚                  â”‚
          â–¼                  â–¼                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Player 1 â”‚      â”‚ Player 2 â”‚      â”‚ Player 3 â”‚
    â”‚  Charts  â”‚      â”‚  Charts  â”‚      â”‚  Charts  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Same NPCs for   â”‚
                    â”‚   EVERYONE! ğŸŒ   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

*Created: October 17, 2025*  
*Visualizes global NPC architecture*
